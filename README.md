# provisioning_monitor
서버 및 네트워크 상태 추적 모니터링

## 1. Ping 체크

### 상황
- 사내 와이파이 공유기가 정상적으로 작동하지 않는 경우 발생
- DHCP 설정이 미흡하여 발생하나, 관리자 설정이 제한되고 로그가 지속적으로 삭제되어 문제점 파악이 어려움

### 솔루션
- ping을 통해서 정상 작동 여부 확인 진행.
- 내부망에서 스케줄링
- 내부망에서 프라이빗 서브넷에 위치한 DB에 주기적으로 업로드 요청 진행
    - API 및 Token을 활용하면 더 좋을듯?
- ping 체크 종료 후 'alarm' 기능을 통해 비정상 로그(#3 참조) 확인 시 Labmda로 트리거 전송

## 2. 모니터링 Web

### 상황
- 어디서든 네트워크 상황을 체크할 수 있도록 간단한 웹 UI 생성
- 되도록이면 접근 제한을 걸어두면 좋음
    - 솔루션 고안 필요

### 솔루션
- DB Table에서 해당 데이터들을 실시간으로 가져와서 시각적으로 표현

## 3. 경보 알림

### 상황
- 하루종일 웹을 켜고 살 수는 없으니 경보 기준을 세운 뒤 경보 생성
- 경보 트리거를 통해 aws Labmda에 요청
- 담당자에게 알림 수신

### 경보 기준
1. 와이파이 작동 불량
    - 전체 와이파이 공유기(20개) 중 절반(10개) 이상이 10분 이상 응답이 없는 경우

2. 와이파이 속도 저하
    - 전체 와이파이 공유기(20개) 중 절반(10개) 이상이 10분 이상 duration 100ms 이상인 경우

### 솔루션
- API Gateway로 메소드 전송 (트리거)
- Lambda 트리거 동작
    - SNS 토픽으로 내용 전달
- SNS 구독된 서비스에 내용 전달
    - 사전 세팅 필요 (ex. 담당자 이메일 등)